#:kivy 2.0.0

<AdminScreen>:
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'horizontal'
            BoxLayout:
                orientation: 'vertical'
                spacing: [20, 20]
                padding: [40]
                Label:
                    id: instructions1
                    text: 'Please Enter\nStudent ID Below'
                    halign: 'center'
                    font_size: '20sp'
                TextInput:
                    id: id_input
                    text: ''
                    background_color: (1, 0, 1, 0.5)
                    font_size: '20sp'
            BoxLayout:
                orientation: 'vertical'
                spacing: [15, 15]
                padding: [30]
                Label:
                    id: instructions2
                    text: 'Please Enter\nStudent Name Below'
                    halign: 'center'
                    font_size: '20sp'
                TextInput:
                    id: name_input
                    text: ''
                    background_color: (1, 0, 1, 0.5)
                    font_size: '20sp'
            GridLayout:
                rows: 4
                cols: 1
                spacing: [15]
                padding: [30]
                Button:
                    text: 'Add'
                    background_color: root.red
                    font_size: '25sp'
                    on_press: root.addStudent()
                Button:
                    text: 'Update'
                    background_color: root.red
                    font_size: '25sp'
                    on_press: root.updateStudent()
                Button:
                    text: 'View Machine Access'
                    background_color: root.red
                    font_size: '18sp'
                    on_press: root.viewAccess();
                Button:
                    text: 'View Logs'
                    background_color: root.red
                    font_size: '25sp'
                    on_press: 
                        root.manager.transition.direction = 'left'
                        root.manager.current = 'log'
        GridLayout:
            rows: 2
            cols: 4
            spacing: [5]
            padding: [10]
            Button:
                id: 1
                name: 1
                text: root.machines[self.name - 1]
                background_normal: ''
                background_color: root.red
                font_size: '20sp'
                on_press: root.toggleColor(self.name, self.background_color)
            Button:
                id: 2
                name: 2
                text: root.machines[self.name - 1]
                background_normal: ''
                background_color: root.red
                font_size: '20sp'
                on_press: root.toggleColor(self.name, self.background_color)
            Button:
                id: 3
                name: 3
                text: root.machines[self.name - 1]
                background_normal: ''
                background_color: root.red
                font_size: '20sp'
                on_press: root.toggleColor(self.name, self.background_color)
            Button:
                id: 4
                name: 4
                text: root.machines[self.name - 1]
                background_normal: ''
                background_color: root.red
                font_size: '20sp'
                on_press: root.toggleColor(self.name, self.background_color)
            Button:
                id: 5
                name: 5
                text: root.machines[self.name - 1]
                background_normal: ''
                background_color: root.red
                font_size: '20sp'
                on_press: root.toggleColor(self.name, self.background_color)
            Button:
                id: 6
                name: 6
                text: root.machines[self.name - 1]
                background_normal: ''
                background_color: root.red
                font_size: '20sp'
                on_press: root.toggleColor(self.name, self.background_color)
            Button:
                id: 7
                name: 7
                text: root.machines[self.name - 1]
                background_normal: ''
                background_color: root.red
                font_size: '20sp'
                on_press: root.toggleColor(self.name, self.background_color)
            Button:
                id: 8
                name: 8
                text: root.machines[self.name - 1]
                background_normal: ''
                background_color: root.red
                font_size: '20sp'
                on_press: root.toggleColor(self.name, self.background_color)

<Row>:
    canvas.before: 
        Color:
            rgba: 0.5, 0.5, 0.5, 1
        Rectangle:
            size: self.size
            pos: self.pos
    Label:
        id: name
    Label:
        id: time_in
    Label:
        id: time_out
    Button:
        id: machs
        size_hint_y: .88
        pos_hint: {"center_x":.5,"center_y":.5}
        on_release: root.showMachines()

<MachinesUsed>:
    size_hint: .5, .5
    title: 'Machines Used:'
    on_open:
        machines_used_label.text = root.update_text()
    Label:
        id: machines_used_label
        #on_press: root.dismiss()

<LogScreen>:
    rv: rv
    BoxLayout:
        orientation: 'vertical'
        canvas:
            Color:
                rgba: 0.3, 0.3, 0.3, 1
            Rectangle:
                size: self.size
                pos: self.pos
        GridLayout:
            cols: 4
            rows: 1
            size_hint_y: .25
            height: dp(108) #height of child widgets
            padding: dp(10) #distance between layout and children
            spacing: dp(16) #distance between children
            Button:
                text: 'Return to Main Screen'
                on_press:
                    root.manager.transition.direction = 'right'
                    root.manager.current = 'admin'
            Button:
                id: limits
                text: 'Showing: Latest 100 Sign-Ins'
                on_release: root.switchLimit()
        GridLayout:
            cols: 4
            rows: 1
            size_hint_y: .1
            ColumnButton:
                id: student
                font_name: "Arial.ttf" #different font so we can use pointy triangles
                text: 'Students '
                on_press: self.buttonPress([root.ids.TI, root.ids.TO], 'name', root)
            ColumnButton:
                id: TI
                font_name: "Arial.ttf"
                text: 'Time In \u25BC'
                sortState: 'down'
                on_press: self.buttonPress([root.ids.student, root.ids.TO], 'time_in', root)
            ColumnButton:
                id: TO
                font_name: "Arial.ttf"
                text: 'Time Out '
                on_press: self.buttonPress([root.ids.student, root.ids.TI], 'time_out', root)
            Button:
                font_name: "Arial.ttf"
                text: 'Machines Used'
                background_down: 'atlas://data/images/defaulttheme/button' #removes flash on click

        RecycleView:
            id: rv
            scroll_type: ['bars', 'content']
            scroll_wheel_distance: dp(114)
            bar_width: dp(10)
            viewclass: 'Row'
            RecycleBoxLayout:
                default_size: None, dp(56)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                orientation: 'vertical'
                spacing: dp(2)